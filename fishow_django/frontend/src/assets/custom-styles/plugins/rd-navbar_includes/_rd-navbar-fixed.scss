/*
*
* RD Navbar Fixed Layout
*/


$rd-navbar-fixed-height: $rd-navbar-min-height;
$rd-navbar-fixed-line-height: $rd-navbar-min-line-height;

$rd-navbar-fixed-panel-color: $gray-300;
$rd-navbar-fixed-panel-background: $white;
$rd-navbar-fixed-shadow: none;
$rd-navbar-fixed-border: $rd-navbar-border;

$rd-navbar-fixed-nav-color: $rd-navbar-color;
$rd-navbar-fixed-nav-background: $rd-navbar-background;

$rd-navbar-fixed-nav-active-color: $white;
$rd-navbar-fixed-nav-active-background: $primary;

$rd-navbar-fixed-menu-item-color: $gray-300;
$rd-navbar-fixed-menu-item-hover-color: $white;
$rd-navbar-fixed-menu-item-background: $rd-navbar-fixed-panel-background;
$rd-navbar-fixed-menu-item-hover-background: $primary;

$rd-navbar-fixed-menu-item-font-size: 14px;
$rd-navbar-fixed-menu-item-line-height: 16px;
$rd-navbar-fixed-menu-item-padding-vertical: 9px;
$rd-navbar-fixed-menu-item-padding-horizontal: 18px;
$rd-navbar-fixed-menu-item-height: 52px;

$rd-navbar-fixed-submenu-toggle-color: $gray-300;
$rd-navbar-fixed-submenu-toggle-hover-color: $primary;
$rd-navbar-fixed-submenu-toggle-focus-color: $white;


.rd-navbar-fixed {
  display: block;

  // Reveal nav panel toggle
  .rd-navbar-toggle {
    display: inline-block;
  }

  // RD Navbar Brand
  .rd-navbar-brand {
    position: relative;
    margin-left: 6px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    text-align: left;
    font-size: 22px;
    line-height: 46px;

    img {
      max-width: 160px;
      max-height: 58px;
      width: auto;
      height: auto;
    }
  }

  // RD Navbar Panel
  .rd-navbar-panel {
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    z-index: $zindex-rd-navbar;
    display: flex;
    align-items: center;
    height: $rd-navbar-fixed-height;
    padding: ($rd-navbar-fixed-height - $rd-navbar-fixed-line-height) / 2;
  }

  .rd-navbar-panel-inner {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-left: 15px;
    padding-right: 5px;

    > * + * {
      margin-left: 14px;
    }
  }

  .rd-navbar-panel-item-right {
    text-align: right;
  }

  // RD Navbar Brand
  .rd-navbar-brand {
    text-align: center;
    img {
      max-width: 300px;
      max-height: 90px;
    }
  }

  .brand { display: inline-block; }

  // RD Navbar Main
  .rd-navbar-main {
    @extend %rd-navbar-transition;
    position: fixed;
    left: 0;
    top: -$rd-navbar-min-height;
    bottom: -$rd-navbar-min-height;
    z-index: $zindex-rd-navbar - 1;
    width: $rd-navbar-nav-min-width;
    padding: $rd-navbar-min-height  * 2 0 ($rd-navbar-min-height + 25px);
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    font-size: 14px;
    line-height: 34px;
    transform: translateX(-110%);

    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-thumb {
      background: lighten($primary, 20%);
      border: none;
      border-radius: 0;
      opacity: .2;
    }

    &::-webkit-scrollbar-track {
      background: $primary;
      border: none;
      border-radius: 0;
    }
    
    &.active {
      transform: translateX(0);
    }
    
    // RD Search
    .rd-navbar-search,
    .rd-search {
      width: 100%;
    }

    .rd-navbar-search-toggle {
      display: none;
    }

    .cart-inline-toggled-outer {
      position: relative;
      
      button {
        pointer-events: none;
      }
    }

    .cart-inline-toggled {
      display: none;
    }
    
    .link-cart-hidden-link {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      display: block;
      
      &:hover ~ .link-cart .link-cart-icon {
        color: $primary;
      }
    }
  }

  // RD Navbar Nav
  .rd-navbar-nav {
    display: block;
    height: auto;
    text-align: left;
  }
  
  * + .rd-navbar-nav {
    margin-top: 10px;
  }

  .rd-nav-item {
    text-align: left;
    + .rd-nav-item {
      margin-top: 4px;
    }
  }
  
  .rd-nav-link {
    display: flex;
    align-items: center;
    min-height: $rd-navbar-fixed-menu-item-height;
    padding: $rd-navbar-fixed-menu-item-padding-vertical 56px $rd-navbar-fixed-menu-item-padding-vertical $rd-navbar-fixed-menu-item-padding-horizontal;
  }
  
  .heading-component-inner {
    padding-left: 15px;
  }
  
  li {
    &.opened {
      > .rd-navbar-dropdown {
        padding: 4px 0 0;
      }
    
      > .rd-navbar-megamenu {
        padding-top: 15px;
        padding-bottom: 15px;
      }
    
      > .rd-menu {
        opacity: 1;
        height: auto;
      }
    
      > .rd-navbar-submenu-toggle {
        &::after {
          transform: rotate(180deg);
        }
      }
    }
  }
  
  .rd-menu {
    display: none;
    transition: opacity 0.3s, height 0.4s ease;
    opacity: 0;
    height: 0;
    overflow: hidden;
  }
  
  .rd-navbar-submenu {
    position: relative;
    @extend %rd-navbar-transition;
    
    .rd-navbar-dropdown {
      .rd-navbar-submenu-toggle:after {
        height: 34px;
        line-height: 34px;
      }
    }

    .rd-navbar-dropdown > li > a {
      padding-left: 20px;
    }
    
    .rd-navbar-dropdown li li > a,
    .rd-navbar-megamenu ul li li > a {
      padding-left: 46px;
    }
    
    &.opened {
      > .rd-navbar-dropdown,
      > .rd-navbar-megamenu {
        display: block;
      }
    }
  }

  .rd-megamenu-list,
  .rd-navbar-dropdown {
    > li > a {
      display: block;
      padding: 9px 56px 9px 16px;
      font-size: 12px;
      line-height: 1.5;
    }
    
    > li + li { margin-top: 3px; }
  }


  // RD Navr Megamenu
  .rd-navbar-megamenu { }

  .rd-navbar-megamenu .rd-megamenu-list-link {
    padding-left: 20px;
  }

  * + .rd-megamenu-list { margin-top: 2px; }

  .rd-megamenu-item-content {
    margin: 15px;

    .heading-component {
      margin: 0 0 0 -10px;
    }
  }

  .rd-megamenu-item + .rd-megamenu-item {
    margin-top: 28px;
  }

  // RD Navbar toggle
  .rd-navbar-submenu-toggle {
    cursor: pointer;
    &::after {
      content: '\f107';
      position: absolute;
      top: 0;
      right: 0;
      width: 56px;
      height: $rd-navbar-fixed-menu-item-height;
      font: 400 14px "FontAwesome";
      line-height: $rd-navbar-fixed-menu-item-height;
      text-align: center;
      transition: 0.4s all ease;
      z-index: 2;
      cursor: pointer;
    }
  }

  // RD Navbar Collapse
  .rd-navbar-collapse-toggle {
    display: block;
    max-width: 50px;
    z-index: $zindex-rd-navbar + 1;
  }
  
  .rd-navbar-collapse {
    position: absolute;
    right: 0;
    top: $rd-navbar-fixed-height - 1px;
    z-index: $zindex-rd-navbar - 1;
    width: 100vw;
    max-width: 100%;
    padding: 15px 20px;
    transform-origin: 50% 0;
    transform: scale3d(1, .5, 1);
    border-radius: 0;
    text-align: left;
    font-size: 14px;
    opacity: 0;
    visibility: hidden;
    transition: .4s;

    &.active {
      transform: scale3d(1, 1, 1);
      opacity: 1;
      visibility: visible;
    }

    .owl-carousel {
      .owl-item.active + .owl-item {
        opacity: 0;
      }
    }
  }

  .select2-container {
    position: relative;
    top: -1px;
  }
  
  // RD Navbar Search
  .rd-search-results-live {
    display: none;
  }

  .rd-navbar-main-element {
    margin: 10px 18px;
  }

  .rd-navbar-main-top {
    .rd-navbar-main-element {
      margin-left: 0;
      margin-right: 0;
    }
  }

  * + .rd-navbar-main-element {
    margin-top: 20px;
  }
  
  // Search toggle
  .rd-navbar-search-toggle {
    @include display-inline-flex;
    @include toggle-icons-via-rotation(48px, 48px, 26px, '\f43b', '\f24c', 'Material Design Icons', 'Material Design Icons');
  }

  // Grid
  .container {
    padding: 0;
  }

  * + .row {
    margin-top: 12px;
  }

  [class^='col'] {
    width: 100%;
    @include flex-basis(100%);
  }

  // Posts
  .post-classic-title {
    font-size: 12px;
  }

  .post-classic-figure img {
    max-width: 86px;
  }

  * + .post-classic-title {
    margin-top: 0;
  }

  // List Inline Bordered
  .list-inline-bordered {
    transform: none;
    margin-top: -4px;
    margin-bottom: 0;
  }

  // Heading Component
  .heading-component {
    margin-bottom: 10px;
    margin-left: 5px;
    margin-right: 10px;
    border-bottom-color: $gray-12;
  }

  .heading-component-title {
    font-size: 13px;
    color: $gray-10;
  }

  // Cart Inline Toggled
  .cart-inline-toggled-outer {
    position: static;
  }

  .cart-inline-toggle {
    &::after {
      bottom: -19px;
    }
  }

  .cart-inline-toggled {
    position: fixed;
    top: $rd-navbar-min-height;
    margin: 0 auto;
  }

  .svg-sizing-35 {
    &,
    * {
      height: 30px;
      width: 30px;
    }
  }

  &.rd-navbar--is-clone { display: none; }
  .rd-navbar-fixed--visible { display: block; }
  .rd-navbar-fixed--hidden { display: none; }

  * + .rd-navbar-list { margin-top: 20px; }
  * + .rd-navbar-search { margin-top: 20px; }
}


// Default color theme
.rd-navbar-fixed {
  // RD Navbar Panel
  .rd-navbar-panel {
    background: $rd-navbar-darker;
  }

  // RD Navbar Main
  .rd-navbar-main {
    background: $rd-navbar-dark;
    box-shadow: 0 0 10px 0 rgba($black, .2);
  }

  // RD Navbar Nav Wrap
  .rd-navbar-nav-wrap {
    color: $white;
    background: $rd-navbar-background;
    border: $rd-navbar-border;
    box-shadow: $rd-navbar-fixed-shadow;
  }

  // RD Navbar Nav
  .rd-nav-item {
    &:hover,
    &.focus,
    &.active,
    &.opened {
      .rd-nav-link {
        color: $rd-navbar-fixed-menu-item-hover-color;
        background: $rd-navbar-fixed-menu-item-hover-background;
      }
  
      > .rd-navbar-submenu-toggle {
        color: $rd-navbar-fixed-submenu-toggle-focus-color;
      }
    }
  }
  .rd-nav-link {
    color: $rd-navbar-fixed-panel-color;
  }
  
  // RD Navbar Dropdown || Megamenu
  .rd-megamenu-list,
  .rd-navbar-dropdown {
     > li > a {
        color: $gray-400;
    }

    > li:hover,
    > li.focus,
    > li.active,
    > li.opened {
      > a {
        color: $rd-navbar-fixed-menu-item-hover-color;
        background: $primary;
      }
    }
  }

  // RD Navbar megamenu
  .rd-navbar-megamenu {
    .rd-megamenu-title {
      color: $gray-300;

      &::after {
        border-bottom: rgba($white, .15);
      }
      
      a {
        @include link($white, $primary);
      }
    }
  }

  .rd-navbar-submenu-toggle {
    color: $rd-navbar-fixed-panel-color;
  }

  // RD Navbar Search
  .rd-navbar-search {
    .rd-search-form-submit {
      color: $gray-300;

      &:hover {
        color: $primary;
      }
    }
  }

  // Search toggle
  .rd-navbar-search-toggle {
    color: $rd-navbar-panel-color;

    &:hover {
      color: $primary;
    }
  }
  
  // RD Navbar Collapse
  .rd-navbar-collapse {
    background: $rd-navbar-dark;
    box-shadow: $rd-navbar-shadow;

    &,
    a {
      color: $rd-navbar-fixed-panel-color;
    }
  }
}


html.rd-navbar-fixed-linked {
  .page {
    padding-top: $rd-navbar-fixed-height;
  }
}

%context-dark {
  .rd-navbar-fixed {
    .event-teaser {
      color: $white;
      background: $rd-navbar-darker;

      #{headings()} {
        color: $white;
      }
    }

    .event-teaser-highlighted {
      background: lighten($rd-navbar-darker, 5%);
    }

    // Components
    .link-icon {
      .icon {
        margin: 0;
      }
    }

    .link-icon-text {
      font-size: 0;
    }

    .button-gray-outline {
      @include btn-variant($gray-200, transparent, $gray-200, $gray-800, $white, $white);
    }

    .post-classic {
      background-color: transparent;
    }

    .post-classic-title {
      color: $gray-100;

      a {
        &:hover {
          color: $secondary;
        }
      }
    }
  }
}

@-moz-document url-prefix() {
  .rd-navbar-fixed .rd-navbar-main > *:last-child {
    margin-bottom: 80px;
  }
}
